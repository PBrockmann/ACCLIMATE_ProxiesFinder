/*!
 * dc-addons v0.13.1
 *
 * 2016-04-08 11:34:39
 *
 */
!function(){"use strict";return dc.serverChart?!1:("dc"in window||(window.dc={}),void(dc.serverChart=function(a){
//---------------------
// Browser Events
//---------------------
function b(){r.selectAll(C).each(function(a,b){var c=d3.select(this),d=m(c);"function"==typeof dc.serverChart["attachEvents"+d]&&dc.serverChart["attachEvents"+d](b,c)})}function c(a,b){if(b.select("g.brush").size()>0){var c=b.select("g.brush").select(".background").attr("width");b.select("g.brush").on("mousedown",function(){u=d3.mouse(this),y=w,x=v}).on("mousemove",function(){if(null!==u){var a=d3.mouse(this),b=d3.select(this),d=null;if(z){var e=a[0]-u[0];w=y+e,v=x+e,0>w&&(w=0,v=x-y),v>c&&(v=c,w=c-(x-y))}else A?(w=w,v=a[0],w>v&&(d=w,w=v,v=d,A=!1,B=!0),0>w&&(w=0),v>c&&(v=c)):B?(w=a[0],v=v,w>v&&(d=w,w=v,v=d,A=!0,B=!1),0>w&&(w=0),v>c&&(v=c)):(w=d3.min([a[0],u[0]]),v=d3.max([a[0],u[0]]),0>w&&(w=0),v>c&&(v=c));b.select(".extent").attr("x",w).attr("width",v-w),b.selectAll("g.resize").style("display","inline"),b.select("g.resize.e").attr("transform","translate("+v+", 0)"),b.select("g.resize.w").attr("transform","translate("+w+", 0)")}}).on("mouseup",function(){var b=d3.mouse(this),c=d3.select(this);null===u||b[0]===u[0]?(c.select(".extent").attr("width",0),c.selectAll("g.resize").style("display","none"),d(a,[null,null])):
// somehow calculate what was selected
d(a,[w,v]),u=null}),b.select("g.brush").select(".extent").on("mousedown",function(){z=!0}).on("mouseup",function(){z=!1}),b.select("g.brush").select("g.resize.e").on("mousedown",function(){A=!0}).on("mouseup",function(){A=!1}),b.select("g.brush").select("g.resize.w").on("mousedown",function(){B=!0}).on("mouseup",function(){B=!1})}}
//---------------------
// Socket Events
//---------------------
function d(a,b){o.emit("filter",[a,b])}function e(){if(k(),!s.name)throw Error("Name is a required option");o.emit("render",s.name)}function f(a){r.selectAll("*").remove();for(var b=0;b<a.length;b++)r.append("div").style("width",a[b].width+"px").style("height",a[b].height+"px").style("float","left").style("text-align","center").style("line-height",a[b].height+"px").html(s.loadingMessage)}function g(a){r.html(a),b()}function h(a){r.html(s.errorMessage),console.warn(a)}function i(a){var c=document.createElement("div");c.innerHTML=a,c=d3.select(c),r.selectAll(C).each(function(a,d){var e=d3.select(this),f=c.selectAll(C).filter(function(a,b){return b===d}),g=m(e);g&&("function"==typeof dc.serverChart["redraw"+g]?dc.serverChart["redraw"+g](d,e,f):(e.html(f.html()),b()))})}function j(){p&&o.emit("updateConditions",t)}
//---------------------
// Helper Functions
//---------------------
function k(){r.html(s.loadingMessage)}function l(){o=io(s.server,{reconnectionDelay:500,reconnectionDelayMax:2e3,reconnectionAttempts:4}),o.io.on("open",function(){q=!0}),o.io.on("reconnecting",function(){q||r.html(s.reconnectingMessage)}),o.io.on("reconnect_failed",function(){q||r.html(s.connectionErrorMessage)}),o.on("preRender",f),o.on("afterRender",g),o.on("afterRenderError",h),o.on("afterFilter",i),o.on("afterFilterError",h),p=!0}function m(a){try{var b=a.attr("data-type").split("");return b[0]=b[0].toUpperCase(),b.join("")}catch(a){return null}}var n={},o=null,p=!1,q=!1,r=d3.select(a),s={name:null,server:"http://127.0.0.1:3000/",errorMessage:"A problem occurred creating the charts. Please try again later",loadingMessage:"Loading",reconnectingMessage:"There appears to be a problem connecting to the server. Retyring...",connectionErrorMessage:"Could not connect to the server."},t=null,u=null,v=null,w=null,x=null,y=null,z=!1,A=!1,B=!1,C=".dc-server-chart";
//---------------------
// Chart Events
//---------------------
//---------------------
// Init
//---------------------
return dc.serverChart.attachEventsBarChart=function(a,b){b.selectAll("rect.bar").on("click",function(b,c){d(a,c)}),c(a,b)},dc.serverChart.attachEventsPieChart=function(a,b){b.selectAll("g.pie-slice").on("click",function(b,c){d(a,c)})},dc.serverChart.attachEventsRowChart=function(a,b){b.selectAll("rect").on("click",function(b,c){d(a,c)})},dc.serverChart.attachEventsPairedRowChart=function(a,b){b.selectAll("svg").selectAll("rect").on("click",function(b,c,e){d(a,2*c-e)})},dc.serverChart.attachEventsLineChart=function(a,b){b.selectAll("circle.dot").on("mousemove",function(){var a=d3.select(this);a.style("fill-opacity",.8),a.style("stroke-opacity",.8)}).on("mouseout",function(){var a=d3.select(this);a.style("fill-opacity",.01),a.style("stroke-opacity",.01)}),c(a,b)},n.render=function(){return l(),e(),n},n.options=function(a){if(0===arguments.length)return s;for(var b in a)a.hasOwnProperty(b)&&(s[b]=a[b]);return n},n.conditions=function(a){return 0===arguments.length?t:(t=a,j(),n)},k(),n}))}();